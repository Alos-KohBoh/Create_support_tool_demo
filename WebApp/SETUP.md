# セットアップ手順

## 🚀 クイックスタート

### 方法1: ブラウザで直接開く（最も簡単）

1. `index.html` をダブルクリック、または
2. ブラウザにドラッグ&ドロップ
3. 自動的にサンプルデータが読み込まれます

### 方法2: ローカルサーバーで起動（推奨）

**Python 3.x**:
```bash
cd WebApp
python -m http.server 8000
```
ブラウザで `http://localhost:8000` を開く

**Node.js（http-server）**:
```bash
npx http-server WebApp -p 8000
```

**VS Code Live Server**:
1. Live Server拡張機能をインストール
2. `index.html` を右クリック
3. "Open with Live Server" を選択

---

## 📦 初回起動時の動作

初回起動時、または LocalStorage が空の場合、以下のサンプルデータが自動的に作成されます：

### モンスター（3体）
- スライム
- レッサーウルフ
- ホーンラビット

### アイテム（15種類）
- スライムゼリー
- レッサーウルフの毛皮
- 角ウサギの毛皮
- ポーション
- エリクサー
- など

### マスタデータ
- **職業**: 戦士、魔法使い、盗賊、僧侶
- **種族**: 人間、エルフ、ドワーフ、獣人
- **アイテム種別**: ドロップアイテム、装備、消耗品、素材
- **レア度**: コモン、アンコモン、レア、エピック、レジェンド

---

## 🔄 データリセット方法

### 方法1: アプリ内のリセット機能を使用（推奨）

1. ホーム画面の「データ管理」セクションを開く
2. 下部にある「🔄 データリセット」ボタンをクリック
3. 確認ダイアログで「OK」をクリック
4. ページが自動リロードされ、最新のサンプルデータが復元されます

### 方法2: ブラウザのLocalStorageをクリア

#### Chrome / Edge
1. `F12` キーで開発者ツールを開く
2. 「Application」タブをクリック
3. 左側の「Local Storage」を展開
4. サイトのURLをクリック
5. 以下のキーを右クリックして「Delete」:
   - `rpg_monsters`
   - `rpg_items`
   - `rpg_characters`
   - `rpg_works`
   - `plot_chapters`
   - `plot_scenes`
   - `plot_timeline`
   - `bag_data`
   - `master_config`
   - `media_library`
6. ページをリロード (`F5`)

#### Firefox
1. `F12` キーで開発者ツールを開く
2. 「ストレージ」タブをクリック
3. 左側の「ローカルストレージ」を展開
4. サイトのURLをクリック
5. 上記のキーを右クリックして「項目を削除」
6. ページをリロード (`F5`)

#### Safari
1. メニュー → 環境設定 → 詳細
2. 「メニューバーに開発メニューを表示」にチェック
3. 開発 → Webインスペクタを表示
4. 「ストレージ」タブ → ローカルストレージ
5. キーを選択して削除
6. ページをリロード

### 方法3: プライベートモード/シークレットモードで起動

- **Chrome/Edge**: `Ctrl + Shift + N`
- **Firefox**: `Ctrl + Shift + P`
- **Safari**: `Cmd + Shift + N`

プライベートモードでは LocalStorage が永続化されないため、常にクリーンな状態で起動します。

---

## 📂 データのバックアップと復元

### エクスポート（バックアップ）

1. ホーム画面で「データ管理」を開く
2. 「📤 データエクスポート」ボタンをクリック
3. JSON形式のファイルがダウンロードされます
   - ファイル名: `rpg_creative_data_YYYY-MM-DD.json`
   - 内容: モンスター、アイテム、キャラクター、作品、プロット、鞄、メディアライブラリ

### インポート（復元）

1. 「📥 データインポート」ボタンをクリック
2. 保存したJSONファイルを選択
3. 確認ダイアログで内容を確認
4. 「OK」で復元完了
5. **注意**: 現在のデータは上書きされます

---

## 🖼️ 画像の管理

### 画像の追加方法

**1. URL直接入力**:
- 画像入力フィールドにURLを貼り付け
- 外部ホスティングサービスのURLを使用

**2. ファイルアップロード**:
- 「ファイル」ボタンをクリック
- ローカルの画像ファイルを選択
- 自動的にメディアライブラリに保存（Base64形式）

**3. メディアライブラリから選択**:
- 「ライブラリ」ボタンをクリック
- 過去にアップロードした画像を再利用

### メディアライブラリの制限

- **画像サイズ**: 最大5MB/画像
- **保存形式**: Base64エンコード
- **保存先**: LocalStorage（ブラウザの容量制限に依存）
- **対応形式**: JPEG, PNG, GIF, WebP など

### ストレージ容量の確認

メディアライブラリモーダルの上部に使用量が表示されます。
LocalStorageの容量制限（通常5-10MB）を超えると保存できません。

---

## 🔧 トラブルシューティング

### データが古い・正しく表示されない

**症状**:
- モンスター名が「ゴブリン」「ドラゴン」になっている
- アイテム種別が「回復」「防具」「武器」になっている
- 追加した機能が動作しない

**解決策**:
1. 「データリセット」を実行
2. ブラウザのキャッシュをクリア（`Ctrl + Shift + Delete`）
3. スーパーリロード（`Ctrl + F5` または `Cmd + Shift + R`）

### 画像がアップロードできない

**原因と解決策**:
- ファイルサイズが5MBを超えている → 画像を圧縮
- LocalStorageの容量が不足 → 古い画像を削除
- 対応していないファイル形式 → JPEG/PNGに変換

### プロットエクスポートができない

**原因と解決策**:
- 作品が選択されていない → 作品一覧から作品を選択
- クリップボード APIが非対応 → フォールバック機能が自動で働きます
- ファイルダウンロードがブロックされる → ブラウザのポップアップ設定を確認

### データが消えた

**原因**:
- LocalStorageがクリアされた
- ブラウザの設定でストレージが削除された
- プライベートモードで使用していた

**予防策**:
- 定期的に「データエクスポート」でバックアップ
- 重要なデータは JSON ファイルとして保存

### レスポンシブが正しく動作しない

**解決策**:
- ブラウザの最新版にアップデート
- ブラウザのズーム倍率を100%に設定
- 開発者ツールのレスポンシブモードで確認

---

## 📱 推奨環境

### ブラウザ
- **Chrome**: 90以上
- **Firefox**: 88以上
- **Safari**: 14以上
- **Edge**: 90以上

### デバイス
- **デスクトップ**: 1024px以上推奨
- **タブレット**: 768px〜1024px対応
- **モバイル**: 480px以上対応

### ストレージ
- **LocalStorage**: 5〜10MB（ブラウザ依存）
- **画像**: 1枚あたり最大5MB

---

## 🎯 初回使用時のおすすめフロー

### 1. まずは体験
1. ホーム画面から「ガチャシミュレーション」を開く
2. サンプルモンスター「スライム」を選択
3. 試行回数「100」でガチャを実行
4. 結果を確認（集計、期待値、ログ、グラフ）

### 2. キャラクターを作成
1. 「キャラクター管理」を開く
2. 「キャラクターを追加」をクリック
3. 名前、職業、ステータスを入力
4. 画像をアップロード（任意）

### 3. 作品を作成
1. 「プロット作成・管理」を開く
2. 「新規作品を作成」をクリック
3. タイトル、ジャンル、説明を入力
4. キャラクターを作品に紐付け（編集で所属作品を選択）

### 4. プロットを作成
1. 作品を選択して章編集画面へ
2. 「章を追加」でストーリー構造を作成
3. 各章に「シーンを追加」
4. タイムラインでイベントを整理

### 5. プロットをエクスポート
1. 章編集画面で「📋 テキストコピー」または「💾 ファイル出力」
2. Word、メモ帳などで編集開始

### 6. データをバックアップ
1. ホーム画面の「データ管理」へ
2. 「📤 データエクスポート」でJSON保存
3. 定期的にバックアップを取る習慣を

---

## 🆘 サポート

### よくある質問

**Q: データはどこに保存されますか？**
A: ブラウザのLocalStorageに保存されます。同じブラウザ・同じURLでアクセスすれば復元されます。

**Q: 複数のPCで同じデータを使えますか？**
A: エクスポート/インポート機能を使えば可能です。JSON ファイルを共有してください。

**Q: オフラインでも使えますか？**
A: はい。一度読み込めばインターネット接続なしで動作します。

**Q: スマホでも使えますか？**
A: はい。完全レスポンシブデザインでモバイル対応しています。

**Q: データの容量制限は？**
A: LocalStorageの制限（通常5〜10MB）までです。画像を大量に保存すると容量を圧迫します。

---

## 📚 追加リソース

- **README.md**: 機能の詳細説明
- **ブラウザ開発者ツール**: `F12` でデバッグ可能
- **Chart.js ドキュメント**: https://www.chartjs.org/

---

**準備完了！RPG創作を始めましょう！ 🎮✨**
