# セットアップ手順 - RPG創作支援ツール v2.0

## 🚀 クイックスタート（3つの方法）

### 方法1: ブラウザで直接開く（最も簡単）✨

1. **`index.html` をダブルクリック**、または
2. **ブラウザにドラッグ&ドロップ**
3. 自動的にサンプルデータが読み込まれます ✅

**推奨ブラウザ**:
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

---

### 方法2: ローカルサーバーで起動（推奨）🔥

#### **Python 3.x の場合**:
```bash
cd WebApp
python -m http.server 8000
```
ブラウザで `http://localhost:8000` を開く

#### **Node.js（http-server）の場合**:
```bash
# npxで即実行（インストール不要）
npx http-server WebApp -p 8000

# またはグローバルインストール後
npm install -g http-server
http-server WebApp -p 8000
```

#### **PHP の場合**:
```bash
cd WebApp
php -S localhost:8000
```

---

### 方法3: VS Code Live Server（開発者向け）💻

1. **Live Server拡張機能をインストール**:
   - VS Code拡張機能マーケットプレイスで「Live Server」を検索
   - インストール

2. **起動**:
   - `index.html` を右クリック
   - 「Open with Live Server」を選択
   - 自動的にブラウザが開きます

3. **利点**:
   - ファイル変更時に自動リロード
   - 開発効率が大幅アップ

---

## 📦 初回起動時の動作

初回起動時、または LocalStorage が空の場合、以下の**サンプルデータ**が自動的に作成されます：

### 🎲 ドロップシミュレーション用データ

#### モンスター（3体）
- **スライム** - HP: 50, レベル: 1
- **レッサーウルフ** - HP: 100, レベル: 3
- **ホーンラビット** - HP: 80, レベル: 2

#### アイテム（15種類以上）
| アイテム名 | レア度 | 種類 |
|----------|------|------|
| スライムゼリー | コモン | 素材 |
| レッサーウルフの毛皮 | アンコモン | 素材 |
| 角ウサギの毛皮 | アンコモン | 素材 |
| ポーション | コモン | 消耗品 |
| エリクサー | レア | 消耗品 |
| 鉄の剣 | コモン | 装備 |
| ミスリルの剣 | エピック | 装備 |

### 📊 マスタデータ

#### 職業（10種類）
戦士、魔法使い、盗賊、僧侶、騎士、弓使い、暗殺者、錬金術師、吟遊詩人、召喚士

#### 種族（6種類）
人間、エルフ、ドワーフ、獣人、ドラゴニアン、妖精

#### 属性（6種類）
無属性、火、水、風、地、光、闇

#### アイテム種別（6種類）
ドロップアイテム、装備、消耗品、素材、鍵アイテム、その他

#### レア度（5段階）
コモン、アンコモン、レア、エピック、レジェンド

#### 作品ジャンル（10種類）
ファンタジー、SF、現代、歴史、ミステリー、ホラー、恋愛、冒険、学園、ダーク

---

## 💾 データ保存の仕組み

### LocalStorage使用データ

すべてのデータはブラウザの**LocalStorage**に自動保存されます：

```
💾 保存される情報:
✅ キャラクター情報（画像含む）
✅ 作品・章・シーン
✅ プロット・タイムライン
✅ キャラクター関係性
✅ モンスター・アイテムデータ
✅ 鞄（アイテム所持状況）
✅ メディアライブラリ
✅ プロジェクト設定
✅ バックアップデータ
✅ コメント・変更履歴
✅ テンプレート
✅ ワールドマップ
✅ 世界観設定
```

### 注意事項 ⚠️

- **ブラウザごとに独立**: Chrome、Firefox、Safariなどブラウザごとにデータは別管理
- **プライベートモード**: シークレットモードではデータが保存されません
- **容量制限**: 通常5〜10MBまで（ブラウザによる）
- **バックアップ推奨**: 定期的にエクスポート機能でバックアップを推奨

---

## 🔄 データ管理

### データエクスポート（バックアップ）📤

1. **ホーム画面**の「システム設定」タブを開く
2. 「💾 手動バックアップ実行」ボタンをクリック
3. JSONファイルがダウンロードされます
4. ファイル名例: `rpg_backup_2025-12-12_14-30-45.json`

**推奨タイミング**:
- 重要な変更の前後
- 大量のデータ入力後
- 定期的（週1回など）

### データインポート（復元）📥

1. 「システム設定」タブを開く
2. 「📂 バックアップから復元」ボタンをクリック
3. バックアップファイル（JSON）を選択
4. 確認ダイアログで「OK」をクリック
5. データが復元され、自動リロード

### 自動バックアップ設定 ⚙️

1. 「システム設定」タブの「バックアップ設定」セクション
2. 「自動バックアップを有効化」にチェック
3. バックアップ間隔（分）を設定（デフォルト: 30分）
4. 「設定を保存」をクリック

**自動バックアップの動作**:
- 設定した間隔でLocalStorageに自動保存
- 最新バックアップの日時が表示されます
- 手動でいつでもエクスポート可能

---

## 🗑️ データリセット方法

### 方法1: アプリ内のリセット機能（推奨）✨

1. **ホーム画面**の最下部までスクロール
2. 「🔄 データリセット」ボタンをクリック
3. 確認ダイアログで「OK」をクリック
4. ページが自動リロードされ、最新のサンプルデータが復元されます

### 方法2: ブラウザのLocalStorageを手動クリア 🛠️

#### Chrome / Edge の場合:
1. `F12` キーで**開発者ツール**を開く
2. 「**Application**」タブをクリック
3. 左側の「**Local Storage**」を展開
4. サイトのURL（例: `file://` または `localhost:8000`）をクリック
5. **すべてのキーを選択**して右クリック → 「Delete」
   
   主なキー一覧:
   ```
   characters
   works
   currentWorkId
   plot_chapters
   plot_scenes
   plot_timeline
   character_relationships
   rpg_*（プロジェクト関連）
   worldsetting_*（世界観設定）
   など
   ```

6. ページをリロード (`F5` または `Ctrl+R`)

#### Firefox の場合:
1. `F12` キーで**開発者ツール**を開く
2. 「**ストレージ**」タブをクリック
3. 左側の「**ローカルストレージ**」を展開
4. サイトのURLをクリック
5. 上記のキーを右クリック → 「項目を削除」
6. ページをリロード (`F5`)

#### Safari の場合:
1. メニュー → 環境設定 → 詳細
2. 「メニューバーに**開発メニュー**を表示」にチェック
3. 開発 → **Webインスペクタ**を表示
4. 「**ストレージ**」タブ → ローカルストレージ
5. キーを選択して削除
6. ページをリロード (`Command+R`)

---

## 🔧 トラブルシューティング

### データが保存されない 💾❌

**原因と対処法**:

1. **プライベートモード**:
   - シークレット/プライベートモードでは保存されません
   - 通常モードで起動してください

2. **容量オーバー**:
   - LocalStorageの容量（5〜10MB）を超えている
   - 不要なデータを削除
   - 古いバックアップを削除

3. **ブラウザ設定**:
   - Cookie/ローカルデータがブロックされている
   - ブラウザ設定で許可してください

### 画像が表示されない 🖼️❌

**原因と対処法**:

1. **外部URL画像**:
   - URLが正しいか確認
   - HTTPS URLを使用（HTTPは混在コンテンツエラー）

2. **ファイルアップロード**:
   - ファイルサイズが大きすぎる（推奨: 500KB以下）
   - 対応形式: JPG、PNG、GIF、WebP

3. **LocalStorage容量**:
   - 画像データが多すぎると容量オーバー
   - Base64エンコードされるため実ファイルの約1.37倍

### グラフが表示されない 📊❌

**原因と対処法**:

1. **Chart.js未読み込み**:
   - インターネット接続を確認（CDNから読み込み）
   - オフライン環境ではChart.jsをローカルに配置

2. **データ不足**:
   - 統計を表示するには最低限のデータが必要
   - 作品、章、シーンを作成してください

### パフォーマンスが遅い 🐢

**対処法**:

1. **データ量削減**:
   - 不要な作品・キャラクターを削除
   - 古いバックアップを削除

2. **ブラウザキャッシュクリア**:
   - `Ctrl+Shift+Delete` でキャッシュクリア

3. **ブラウザ再起動**:
   - ブラウザを完全に閉じて再起動

---

## 📂 プロジェクト管理のヒント

### 推奨ワークフロー 📝

1. **新規プロジェクト作成**
   - 「システム設定」→「プロジェクト管理」
   - プロジェクト名: 作品名または企画名

2. **作品作成**
   - 「作品管理」タブで作品を作成
   - タイトル、ジャンル、説明を入力

3. **キャラクター登録**
   - 「キャラクター」タブでキャラクター追加
   - 関係性マップで人間関係を定義

4. **世界観設定**
   - 作品を開く → 「世界観」タブ
   - 時代背景、魔法体系、社会構造を記述

5. **プロット作成**
   - 「章」タブで章を作成
   - シーンカードでシーンを追加

6. **定期バックアップ**
   - 自動バックアップを有効化
   - 重要なマイルストーンで手動バックアップ

---

## 🌐 オンライン環境での使用

### GitHub Pagesでホスティング 🚀

1. **GitHubリポジトリ作成**
2. `WebApp`フォルダの内容をpush
3. Settings → Pages → Sourceを`main`ブランチに設定
4. 公開URL: `https://[username].github.io/[repo-name]/`

### Netlify Dropでホスティング ⚡

1. [Netlify Drop](https://app.netlify.com/drop)にアクセス
2. `WebApp`フォルダをドラッグ&ドロップ
3. 即座に公開URL発行

**注意**: オンライン環境では**誰でもアクセス可能**です。機密情報は入れないでください。

---

## 🔒 セキュリティとプライバシー

### データの保存場所 🗄️

- **すべてローカル**: データはあなたのブラウザにのみ保存
- **サーバー送信なし**: インターネット接続不要（Chart.js除く）
- **完全プライベート**: 第三者がアクセスすることはありません

### バックアップの取り扱い 📦

- **バックアップファイル**はJSON形式のテキストファイル
- **機密情報**が含まれる場合は適切に管理
- **クラウドストレージ**にバックアップする場合は暗号化推奨

---

## 📞 サポート

### よくある質問 ❓

**Q: オフラインで使えますか？**
A: はい、ただしChart.js（統計グラフ）はCDNから読み込むためオンライン必須です。完全オフラインにはChart.jsをローカルに配置してください。

**Q: モバイルで使えますか？**
A: はい、完全レスポンシブ対応です。タブレット・スマートフォンでも快適に使用できます。

**Q: データは何MBまで保存できますか？**
A: ブラウザのLocalStorage制限（通常5〜10MB）まで。大量の画像を含む場合は外部URL使用を推奨します。

**Q: 複数人で共同編集できますか？**
A: LocalStorage方式のため同時編集は不可。「作品共有」機能でエクスポート/インポートによる共有が可能です。

---

## 🎯 次のステップ

セットアップが完了したら：

1. ✅ [README.md](README.md)で全機能を確認
2. ✅ サンプルデータで各機能を試す
3. ✅ 最初のプロジェクトを作成
4. ✅ バックアップ設定を有効化
5. ✅ 創作を開始！ 🎉

---

**最終更新**: 2025年12月12日
**バージョン**: 2.0.0 - 全20機能対応版

### 方法3: プライベートモード/シークレットモードで起動

- **Chrome/Edge**: `Ctrl + Shift + N`
- **Firefox**: `Ctrl + Shift + P`
- **Safari**: `Cmd + Shift + N`

プライベートモードでは LocalStorage が永続化されないため、常にクリーンな状態で起動します。

---

## 📂 データのバックアップと復元

### エクスポート（バックアップ）

1. ホーム画面で「データ管理」を開く
2. 「📤 データエクスポート」ボタンをクリック
3. JSON形式のファイルがダウンロードされます
   - ファイル名: `rpg_creative_data_YYYY-MM-DD.json`
   - 内容: モンスター、アイテム、キャラクター、作品、プロット、鞄、メディアライブラリ

### インポート（復元）

1. 「📥 データインポート」ボタンをクリック
2. 保存したJSONファイルを選択
3. 確認ダイアログで内容を確認
4. 「OK」で復元完了
5. **注意**: 現在のデータは上書きされます

---

## 🖼️ 画像の管理

### 画像の追加方法

**1. URL直接入力**:
- 画像入力フィールドにURLを貼り付け
- 外部ホスティングサービスのURLを使用

**2. ファイルアップロード**:
- 「ファイル」ボタンをクリック
- ローカルの画像ファイルを選択
- 自動的にメディアライブラリに保存（Base64形式）

**3. メディアライブラリから選択**:
- 「ライブラリ」ボタンをクリック
- 過去にアップロードした画像を再利用

### メディアライブラリの制限

- **画像サイズ**: 最大5MB/画像
- **保存形式**: Base64エンコード
- **保存先**: LocalStorage（ブラウザの容量制限に依存）
- **対応形式**: JPEG, PNG, GIF, WebP など

### ストレージ容量の確認

メディアライブラリモーダルの上部に使用量が表示されます。
LocalStorageの容量制限（通常5-10MB）を超えると保存できません。

---

## 🔧 トラブルシューティング

### データが古い・正しく表示されない

**症状**:
- モンスター名が「ゴブリン」「ドラゴン」になっている
- アイテム種別が「回復」「防具」「武器」になっている
- 追加した機能が動作しない

**解決策**:
1. 「データリセット」を実行
2. ブラウザのキャッシュをクリア（`Ctrl + Shift + Delete`）
3. スーパーリロード（`Ctrl + F5` または `Cmd + Shift + R`）

### 画像がアップロードできない

**原因と解決策**:
- ファイルサイズが5MBを超えている → 画像を圧縮
- LocalStorageの容量が不足 → 古い画像を削除
- 対応していないファイル形式 → JPEG/PNGに変換

### プロットエクスポートができない

**原因と解決策**:
- 作品が選択されていない → 作品一覧から作品を選択
- クリップボード APIが非対応 → フォールバック機能が自動で働きます
- ファイルダウンロードがブロックされる → ブラウザのポップアップ設定を確認

### データが消えた

**原因**:
- LocalStorageがクリアされた
- ブラウザの設定でストレージが削除された
- プライベートモードで使用していた

**予防策**:
- 定期的に「データエクスポート」でバックアップ
- 重要なデータは JSON ファイルとして保存

### レスポンシブが正しく動作しない

**解決策**:
- ブラウザの最新版にアップデート
- ブラウザのズーム倍率を100%に設定
- 開発者ツールのレスポンシブモードで確認

---

## 📱 推奨環境

### ブラウザ
- **Chrome**: 90以上
- **Firefox**: 88以上
- **Safari**: 14以上
- **Edge**: 90以上

### デバイス
- **デスクトップ**: 1024px以上推奨
- **タブレット**: 768px〜1024px対応
- **モバイル**: 480px以上対応

### ストレージ
- **LocalStorage**: 5〜10MB（ブラウザ依存）
- **画像**: 1枚あたり最大5MB

---

## 🎯 初回使用時のおすすめフロー

### 1. まずは体験
1. ホーム画面から「ガチャシミュレーション」を開く
2. サンプルモンスター「スライム」を選択
3. 試行回数「100」でガチャを実行
4. 結果を確認（集計、期待値、ログ、グラフ）

### 2. キャラクターを作成
1. 「キャラクター管理」を開く
2. 「キャラクターを追加」をクリック
3. 名前、職業、ステータスを入力
4. 画像をアップロード（任意）

### 3. 作品を作成
1. 「プロット作成・管理」を開く
2. 「新規作品を作成」をクリック
3. タイトル、ジャンル、説明を入力
4. キャラクターを作品に紐付け（編集で所属作品を選択）

### 4. プロットを作成
1. 作品を選択して章編集画面へ
2. 「章を追加」でストーリー構造を作成
3. 各章に「シーンを追加」
4. タイムラインでイベントを整理

### 5. プロットをエクスポート
1. 章編集画面で「📋 テキストコピー」または「💾 ファイル出力」
2. Word、メモ帳などで編集開始

### 6. データをバックアップ
1. ホーム画面の「データ管理」へ
2. 「📤 データエクスポート」でJSON保存
3. 定期的にバックアップを取る習慣を

---

## 🆘 サポート

### よくある質問

**Q: データはどこに保存されますか？**
A: ブラウザのLocalStorageに保存されます。同じブラウザ・同じURLでアクセスすれば復元されます。

**Q: 複数のPCで同じデータを使えますか？**
A: エクスポート/インポート機能を使えば可能です。JSON ファイルを共有してください。

**Q: オフラインでも使えますか？**
A: はい。一度読み込めばインターネット接続なしで動作します。

**Q: スマホでも使えますか？**
A: はい。完全レスポンシブデザインでモバイル対応しています。

**Q: データの容量制限は？**
A: LocalStorageの制限（通常5〜10MB）までです。画像を大量に保存すると容量を圧迫します。

---

## 📚 追加リソース

- **README.md**: 機能の詳細説明
- **ブラウザ開発者ツール**: `F12` でデバッグ可能
- **Chart.js ドキュメント**: https://www.chartjs.org/

---

**準備完了！RPG創作を始めましょう！ 🎮✨**
